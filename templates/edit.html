{% extends "root.html" %}

{% block head %}
	<link rel="stylesheet" href="/file/form.css" type="text/css">
	<script>
		function auto_resize(element) {
			element.style.height = "auto";
			element.style.height = (element.scrollHeight + 10) + "px";
		}
	</script>
{% endblock head %}

{% block content %}
	<article>
		<form method="post">
			<div>
				<label for="title">Title: </label>
				<input type="text" name="title" id="title" required>
			</div>
			<div>
				<label for="url">URL: </label>
				<input type="text" name="url" id="url" required>
			</div>
			<input type="hidden" name="author" value="
				{#- TODO: Replace with assignment when no longer broken -#}
				{%- match session -%}
					{%- when Some with (session) -%}
						{{- session.user -}}
					{%- when None -%}
				{%- endmatch -%}">
			<textarea name="content" oninput="auto_resize(this)" required></textarea>
			<div class="submit">
				<input type="submit" value="Submit">
				<input type="checkbox" name="visible" id="visible" value="true">
				<label for="visible">Publish</label>
			</div>
		</form>
	</article>
{% endblock %}
